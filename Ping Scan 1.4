#include <amxmodx>


#define PLUGIN_NAME "Ping Scan"
#define PLUGIN_AUTHOR "LordOfNothing"
#define PLUGIN_VERSION "1.4"


new pCvar;

public plugin_init( )
{
   register_plugin( PLUGIN_NAME, PLUGIN_VERSION, PLUGIN_AUTHOR );
   set_task(1.0 ,"scanner_PING");
   pCvar = register_cvar("sv_maxping","80");

}

public scanner_PING(id)
{
      new name [ 32 ];
      get_user_name(id, name ,31);
      static Ping,Loss;
      get_user_ping(id, Ping, Loss);
      if( Ping > pCvar ) 
      server_cmd("kick %s ",name);
      client_print(id, print_chat, "[ Ping Scan ] %s has been kicked for high ping !",name); 

}
